/* @license
	On-screen keyboard detector (OSKD) v.2.0.0-alpha
	(c) 2020-2020 Matthias Seemann
	OSKD may be freely distributed under the MIT license.
*/
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function t(t,n){for(var e=n.length,r=new Array(e+1),i=0;i<e;++i)r[i]=n[i];return r[e]=t,r}function n(t,n,e){for(var r=n,i=0,o=e.length;i<o;++i)r=t(r,e[i],i);return r}function e(t,n){if(t<0)throw new TypeError("i must be >= 0");var e=n.length;return 0===e||t>=e?n:1===e?[]:function(t,n,e){var r=new Array(e),i=void 0;for(i=0;i<t;++i)r[i]=n[i];for(i=t;i<e;++i)r[i]=n[i+1];return r}(t,n,e-1)}function r(t,n){for(var e=0,r=n.length;e<r;++e)if(t===n[e])return e;return-1}
/** @license MIT License (c) copyright 2010-2016 original author or authors */var i=function(t){return t};function o(t){return function n(e,r){switch(arguments.length){case 0:return n;case 1:return function(n){return t(e,n)};default:return t(e,r)}}}function s(t){return function n(e,r,i){switch(arguments.length){case 0:return n;case 1:return o((function(n,r){return t(e,n,r)}));case 2:return function(n){return t(e,r,n)};default:return t(e,r,i)}}}var u=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},c=function(){function t(n,e,r,i,o){u(this,t),this.time=n,this.localOffset=e,this.period=r,this.task=i,this.scheduler=o,this.active=!0}return t.prototype.run=function(){return this.task.run(this.time-this.localOffset)},t.prototype.error=function(t){return this.task.error(this.time-this.localOffset,t)},t.prototype.dispose=function(){return this.active=!1,this.scheduler.cancel(this),this.task.dispose()},t}(),h=function(){function t(n,e){u(this,t),this.origin=n,this.scheduler=e}return t.prototype.currentTime=function(){return this.scheduler.currentTime()-this.origin},t.prototype.scheduleTask=function(t,n,e,r){return this.scheduler.scheduleTask(t+this.origin,n,e,r)},t.prototype.relative=function(n){return new t(n+this.origin,this.scheduler)},t.prototype.cancel=function(t){return this.scheduler.cancel(t)},t.prototype.cancelAll=function(t){return this.scheduler.cancelAll(t)},t}(),f=function(t){return Promise.resolve(t).then(a)};
/** @license MIT License (c) copyright 2010-2017 original author or authors */function a(t){try{return t.run()}catch(n){return t.error(n)}}
/** @license MIT License (c) copyright 2010-2017 original author or authors */var p=function(){function t(n,e){var r=this;u(this,t),this.timer=n,this.timeline=e,this._timer=null,this._nextArrival=1/0,this._runReadyTasksBound=function(){return r._runReadyTasks(r.currentTime())}}return t.prototype.currentTime=function(){return this.timer.now()},t.prototype.scheduleTask=function(t,n,e,r){var i=this.currentTime()+Math.max(0,n),o=new c(i,t,e,r,this);return this.timeline.add(o),this._scheduleNextRun(),o},t.prototype.relative=function(t){return new h(t,this)},t.prototype.cancel=function(t){t.active=!1,this.timeline.remove(t)&&this._reschedule()},t.prototype.cancelAll=function(t){this.timeline.removeAll(t),this._reschedule()},t.prototype._reschedule=function(){this.timeline.isEmpty()?this._unschedule():this._scheduleNextRun(this.currentTime())},t.prototype._unschedule=function(){this.timer.clearTimer(this._timer),this._timer=null},t.prototype._scheduleNextRun=function(){if(!this.timeline.isEmpty()){var t=this.timeline.nextArrival();null===this._timer?this._scheduleNextArrival(t):t<this._nextArrival&&(this._unschedule(),this._scheduleNextArrival(t))}},t.prototype._scheduleNextArrival=function(t){this._nextArrival=t;var n=Math.max(0,t-this.currentTime());this._timer=this.timer.setTimer(this._runReadyTasksBound,n)},t.prototype._runReadyTasks=function(){this._timer=null,this.timeline.runTasks(this.currentTime(),a),this._scheduleNextRun()},t}(),l=function(){function t(){u(this,t),this.tasks=[]}return t.prototype.nextArrival=function(){return this.isEmpty()?1/0:this.tasks[0].time},t.prototype.isEmpty=function(){return 0===this.tasks.length},t.prototype.add=function(t){v(t,this.tasks)},t.prototype.remove=function(t){var n=g(y(t),this.tasks);if(n>=0&&n<this.tasks.length){var e=this.tasks[n].events,i=r(t,e);if(i>=0)return e.splice(i,1),0===e.length&&this.tasks.splice(n,1),!0}return!1},t.prototype.removeAll=function(t){for(var n=0;n<this.tasks.length;++n)m(t,this.tasks[n])},t.prototype.runTasks=function(t,n){for(var e=this.tasks,r=e.length,i=0;i<r&&e[i].time<=t;)++i;this.tasks=e.slice(i);for(var o=0;o<i;++o)this.tasks=d(n,e[o].events,this.tasks)},t}();
/** @license MIT License (c) copyright 2010-2017 original author or authors */function d(t,n,e){for(var r=0;r<n.length;++r){var i=n[r];i.active&&(t(i),i.period>=0&&i.active&&(i.time=i.time+i.period,v(i,e)))}return e}function v(t,n){var e=n.length,r=y(t);if(0!==e){var i=g(r,n);i>=e?n.push(w(r,[t])):function(t,n,e,r){var i=n[r];e===i.time?function(t,n){0===n.length||t.time>=n[n.length-1].time?n.push(t):function(t,n){for(var e=0;e<n.length;e++)if(t.time<n[e].time){n.splice(e,0,t);break}}(t,n)}(t,i.events):n.splice(r,0,w(e,[t]))}(t,n,r,i)}else n.push(w(r,[t]))}function y(t){return Math.floor(t.time)}function m(t,n){n.events=function(t,n){for(var e,r=n.length,i=new Array(r),o=0,s=0;s<r;++s)t(e=n[s])||(i[o]=e,++o);return i.length=o,i}(t,n.events)}function g(t,n){for(var e=0,r=n.length,i=void 0,o=void 0;e<r;){if(t===(o=n[i=Math.floor((e+r)/2)]).time)return i;t<o.time?r=i:e=i+1}return r}var w=function(t,n){return{time:t,events:n}},k=function(){function t(n){u(this,t),this._clock=n}return t.prototype.now=function(){return this._clock.now()},t.prototype.setTimer=function(t,n){return n<=0?function(t){var n=new b(t);return f(n),n}
/** @license MIT License (c) copyright 2010-2017 original author or authors */(t):setTimeout(t,n)},t.prototype.clearTimer=function(t){return t instanceof b?t.cancel():clearTimeout(t)},t}(),b=function(){function t(n){u(this,t),this.f=n,this.active=!0}return t.prototype.run=function(){return this.active&&this.f()},t.prototype.error=function(t){throw t},t.prototype.cancel=function(){this.active=!1},t}();
/** @license MIT License (c) copyright 2010-2017 original author or authors */var _=function(){function t(n,e){u(this,t),this.origin=e,this.clock=n}return t.prototype.now=function(){return this.clock.now()-this.origin},t}(),O=function(){function t(n,e){u(this,t),this.origin=e,this.hrtime=n}return t.prototype.now=function(){var t=this.hrtime(this.origin);return(1e9*t[0]+t[1])/1e6},t}(),S=function(t){return new _(t,t.now())},T=function(){return"undefined"!=typeof performance&&"function"==typeof performance.now?S(performance):"undefined"!=typeof process&&"function"==typeof process.hrtime?new O(process.hrtime,process.hrtime()):S(Date)},E=function(t){return t.currentTime()},A=o((function(t,n){return n.scheduleTask(0,0,-1,t)})),x=s((function(t,n,e){return e.scheduleTask(0,t,-1,n)})),j=function(t){return t.dispose()},I=o((function(t,n){return new h(t,n)})),q=function(){return new p(H(),new l)},H=function(){return new k(T())},R=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},P=function(){return z},z=new(function(){function t(){R(this,t)}return t.prototype.dispose=function(){},t}()),N=function(t){return new C(t)},C=function(){function t(n){R(this,t),this.disposed=!1,this.disposable=n}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposable.dispose(),this.disposable=void 0)},t}(),D=function(t){var e=n(B,[],t);return 0===e.length?P():new U(e)},M=o((function(t,n){return D([t,n])})),B=function(n,e){return function(t){return t===z}(e)?n:e instanceof U?n.concat(e.disposables):t(e,n)},U=function(){function t(n){R(this,t),this.disposables=n}return t.prototype.dispose=function(){W(V(this.disposables))},t}(),V=function(t){return n(L,[],t)},L=function(t,n){try{n.dispose()}catch(n){t.push(n)}return t},W=function(t){if(t.length>0)throw new F(t.length+" errors",t)},F=function(t){function n(e,r){t.call(this,e),this.message=e,this.name=n.name,this.errors=r,t.captureStackTrace&&t.captureStackTrace(this,n),this.stack=""+this.stack+J(this.errors)}return n.prototype=Object.create(t.prototype),n}(Error),J=function(t){return n(K,"",t)},K=function(t,n,e){return t+"\n["+(e+1)+"] "+n.stack},X=s((function(t,n,e){try{n.dispose()}catch(n){e.error(t,n)}}));function G(t){throw t}var Q=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},Y=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},Z=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},$=function(t,n,e){return new et(t,n,e)},tt=function(t,n){return $(rt,t,n)},nt=function(t){return $(it,void 0,t)},et=function(){function t(n,e,r){Q(this,t),this._run=n,this.value=e,this.sink=r,this.active=!0}return t.prototype.dispose=function(){this.active=!1},t.prototype.run=function(t){if(this.active){var n=this._run;n(t,this.value,this.sink)}},t.prototype.error=function(t,n){if(!this.active)
/** @license MIT License (c) copyright 2010-2016 original author or authors */
return function(t){setTimeout(G,0,t)}(n);this.sink.error(t,n)},t}(),rt=function(t,n,e){return e.event(t,n)},it=function(t,n,e){return e.end(t)},ot=function(){return ut},st=function(t){return t===ut},ut=new(function(){function t(){Q(this,t)}return t.prototype.run=function(t,n){return A(nt(t),n)},t}()),ct=function(t,n){return new ht(t,n)},ht=function(){function t(n,e){Q(this,t),this.time=n,this.value=e}return t.prototype.run=function(t,n){return x(this.time,$(ft,this.value,t),n)},t}();function ft(t,n,e){e.event(t,n),e.end(t)}
/** @license MIT License (c) copyright 2010-2017 original author or authors */var at=function(t){return ct(0,t)},pt=function(){function t(n){Q(this,t),this.sink=n}return t.prototype.event=function(t,n){return this.sink.event(t,n)},t.prototype.end=function(t){return this.sink.end(t)},t.prototype.error=function(t,n){return this.sink.error(t,n)},t}(),lt=function(){function t(n,e){Q(this,t),this.p=n,this.source=e}return t.prototype.run=function(t,n){return this.source.run(new dt(this.p,t),n)},t.create=function(n,e){return st(e)?e:e instanceof t?new t(vt(e.p,n),e.source):new t(n,e)},t}(),dt=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.p=e,i}return Y(n,t),n.prototype.event=function(t,n){(0,this.p)(n)&&this.sink.event(t,n)},n}(pt),vt=function(t,n){return function(e){return t(e)&&n(e)}},yt=function(){function t(n,e,r){Q(this,t),this.p=n,this.f=e,this.source=r}return t.prototype.run=function(t,n){return this.source.run(new mt(this.p,this.f,t),n)},t}(),mt=function(t){function n(e,r,i){Q(this,n);var o=Z(this,t.call(this,i));return o.p=e,o.f=r,o}return Y(n,t),n.prototype.event=function(t,n){var e=this.f;(0,this.p)(n)&&this.sink.event(t,e(n))},n}(pt),gt=function(){function t(n,e){Q(this,t),this.f=n,this.source=e}return t.prototype.run=function(t,n){return this.source.run(new wt(this.f,t),n)},t.create=function(n,e){return st(e)?ot():e instanceof t?new t(function(t,n){return function(e){return t(n(e))}}(n,e.f),e.source):e instanceof lt?new yt(e.p,n,e.source):new t(n,e)},t}(),wt=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.f=e,i}return Y(n,t),n.prototype.event=function(t,n){var e=this.f;this.sink.event(t,e(n))},n}(pt),kt=function(){function t(){Q(this,t),this.disposable=void 0,this.disposed=!1}return t.prototype.setDisposable=function(t){if(void 0!==this.disposable)throw new Error("setDisposable called more than once");this.disposable=t,this.disposed&&t.dispose()},t.prototype.dispose=function(){this.disposed||(this.disposed=!0,void 0!==this.disposable&&this.disposable.dispose())},t}(),bt=function(t,n){return st(n)?ot():new _t(t,n)},_t=function(){function t(n,e){Q(this,t),this.p=n,this.source=e}return t.prototype.run=function(t,n){return this.source.run(new Ot(this.p,t),n)},t}(),Ot=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.p=e,i.skipping=!1,i}return Y(n,t),n.prototype.event=function(t,n){if(!this.skipping){var e=this.p;this.skipping=e(n),this.sink.event(t,n),this.skipping&&this.sink.end(t)}},n}(pt),St=o((function(t,n){return new Promise((function(e,r){return function(t,n,e,r){var i=new kt,o=new Tt(e,r,i);i.setDisposable(t.run(o,n))}(t,n,e,r)}))}));
/** @license MIT License (c) copyright 2010-2017 original author or authors */var Tt=function(){function t(n,e,r){Q(this,t),this._end=n,this._error=e,this._disposable=r,this.active=!0}return t.prototype.event=function(t,n){},t.prototype.end=function(t){this.active&&this._dispose(this._error,this._end,void 0)},t.prototype.error=function(t,n){this._dispose(this._error,this._error,n)},t.prototype._dispose=function(t,n,e){this.active=!1,function(t,n,e,r){try{r.dispose()}catch(n){return void t(n)}n(e)}
/** @license MIT License (c) copyright 2010-2017 original author or authors */(t,n,e,this._disposable)},t}();var Et=function(){function t(n,e){Q(this,t),this.sink=e,this.offset=n}return t.prototype.event=function(t,n){this.sink.event(t+this.offset,n)},t.prototype.error=function(t,n){this.sink.error(t+this.offset,n)},t.prototype.end=function(t){this.sink.end(t+this.offset)},t}(),At=function(){function t(n,e){Q(this,t),this.origin=n,this.source=e}return t.prototype.run=function(t,n){return this.source.run(xt(this.origin,t),I(this.origin,n))},t}(),xt=function(t,n){return n instanceof Et?new Et(t+n.offset,n.sink):new Et(t,n)},jt=function(t,n,e){return new It(t,n,e)},It=function(){function t(n,e,r){Q(this,t),this.source=r,this.f=n,this.value=e}return t.prototype.run=function(t,n){var e=A(tt(this.value,t),n),r=this.source.run(new qt(this.f,this.value,t),n);return M(e,r)},t}(),qt=function(t){function n(e,r,i){Q(this,n);var o=Z(this,t.call(this,i));return o.f=e,o.value=r,o}return Y(n,t),n.prototype.event=function(t,n){var e=this.f;this.value=e(this.value,n),this.sink.event(t,this.value)},n}(pt),Ht=function(){function t(n,e){Q(this,t),this.f=n,this.source=e}return t.prototype.run=function(t,n){return new Rt(this.f,this.source,t,n)},t}(),Rt=function(t){function n(e,r,i,o){Q(this,n);var s=Z(this,t.call(this,i));return s.f=e,s.scheduler=o,s.active=!0,s.disposable=N(r.run(s,o)),s}return Y(n,t),n.prototype.event=function(t,n){this.active&&this.sink.event(t,n)},n.prototype.end=function(t){this.active&&(X(t,this.disposable,this.sink),this._startNext(t,this.sink))},n.prototype._startNext=function(t,n){try{this.disposable=this._continue(this.f,t,n)}catch(e){n.error(t,e)}},n.prototype._continue=function(t,n,e){return function(t,n,e){return e.run(t,n)}(e,this.scheduler,(r=n,i=t(),new At(r,i)));var r,i},n.prototype.dispose=function(){return this.active=!1,this.disposable.dispose()},n}(pt),Pt=function(t,n){return function(t,n){return new Ht(t,n)}((function(){return n}),at(t))},zt=function(t,n){return gt.create(t,n)},Nt=function(t,n){return new Ct(t,n)},Ct=function(){function t(n,e){Q(this,t),this.source=e,this.f=n}return t.prototype.run=function(t,n){return this.source.run(new Dt(this.f,t),n)},t}(),Dt=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.f=e,i}return Y(n,t),n.prototype.event=function(t,n){(0,this.f)(n),this.sink.event(t,n)},n}(pt),Mt=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.index=e,i.active=!0,i.value=void 0,i}return Y(n,t),n.prototype.event=function(t,n){this.active&&(this.value=n,this.sink.event(t,this))},n.prototype.end=function(t){this.active&&(this.active=!1,this.sink.event(t,this))},n}(pt),Bt=function(t,n,e){return st(e)?ot():new Ut(t,n,e)},Ut=function(){function t(n,e,r){Q(this,t),this.f=n,this.concurrency=e,this.source=r}return t.prototype.run=function(t,n){return new Vt(this.f,this.concurrency,this.source,t,n)},t}(),Vt=function(){function t(n,e,r,i,o){Q(this,t),this.f=n,this.concurrency=e,this.sink=i,this.scheduler=o,this.pending=[],this.current=[],this.disposable=N(r.run(this,o)),this.active=!0}return t.prototype.event=function(t,n){this._addInner(t,n)},t.prototype._addInner=function(t,n){this.current.length<this.concurrency?this._startInner(t,n):this.pending.push(n)},t.prototype._startInner=function(t,n){try{this._initInner(t,n)}catch(n){this.error(t,n)}},t.prototype._initInner=function(t,n){var e=new Wt(t,this,this.sink);e.disposable=Lt(this.f,t,n,e,this.scheduler),this.current.push(e)},t.prototype.end=function(t){this.active=!1,X(t,this.disposable,this.sink),this._checkEnd(t)},t.prototype.error=function(t,n){this.active=!1,this.sink.error(t,n)},t.prototype.dispose=function(){this.active=!1,this.pending.length=0,this.disposable.dispose(),D(this.current).dispose()},t.prototype._endInner=function(t,n){var e=this.current.indexOf(n);e>=0&&this.current.splice(e,1),X(t,n,this),0===this.pending.length?this._checkEnd(t):this._startInner(t,this.pending.shift())},t.prototype._checkEnd=function(t){this.active||0!==this.current.length||this.sink.end(t)},t}(),Lt=function(t,n,e,r,i){return t(e).run(r,I(n,i))},Wt=function(){function t(n,e,r){Q(this,t),this.time=n,this.outer=e,this.sink=r,this.disposable=P()}return t.prototype.event=function(t,n){this.sink.event(t+this.time,n)},t.prototype.end=function(t){this.outer._endInner(t+this.time,this)},t.prototype.error=function(t,n){this.outer.error(t+this.time,n)},t.prototype.dispose=function(){return this.disposable.dispose()},t}(),Ft=function(t){return function(t,n){return Bt(i,t,n)}(1/0,t)};
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Jt(t,n){return Kt([t,n])}var Kt=function(t){return Xt(Gt(t))},Xt=function(t){return 0===t.length?ot():1===t.length?t[0]:new Zt(n(Yt,[],t))},Gt=function(t){return t.filter(Qt)},Qt=function(t){return!st(t)},Yt=function(t,n){return t.concat(n instanceof Zt?n.sources:n)},Zt=function(){function t(n){Q(this,t),this.sources=n}return t.prototype.run=function(t,n){for(var e,r=this.sources.length,i=new Array(r),o=new Array(r),s=new $t(i,o,t),u=0;u<r;++u)e=o[u]=new Mt(u,s),i[u]=this.sources[u].run(e,n);return D(i)},t}(),$t=function(t){function n(e,r,i){Q(this,n);var o=Z(this,t.call(this,i));return o.disposables=e,o.activeCount=r.length,o}return Y(n,t),n.prototype.event=function(t,n){n.active?this.sink.event(t,n.value):this._dispose(t,n.index)},n.prototype._dispose=function(t,n){X(t,this.disposables[n],this.sink),0==--this.activeCount&&this.sink.end(t)},n}(pt),tn=function(t,n,e){return st(e)||st(n)?ot():new nn(t,n,e)},nn=function(){function t(n,e,r){Q(this,t),this.f=n,this.values=e,this.sampler=r}return t.prototype.run=function(t,n){var e=new en(this.f,t),r=this.values.run(e.latest,n),i=this.sampler.run(e,n);return M(i,r)},t}(),en=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.f=e,i.latest=new rn(i),i}return Y(n,t),n.prototype.event=function(t,n){if(this.latest.hasValue){var e=this.f;this.sink.event(t,e(this.latest.value,n))}},n}(pt),rn=function(t){function n(e){Q(this,n);var r=Z(this,t.call(this,e));return r.hasValue=!1,r}return Y(n,t),n.prototype.event=function(t,n){this.value=n,this.hasValue=!0},n.prototype.end=function(){},n}(pt),on=function(t){return st(t)?ot():new sn(t)},sn=function(){function t(n){Q(this,t),this.source=n}return t.prototype.run=function(t,n){var e=new un(t,n);return M(e,this.source.run(e,n))},t}(),un=function(){function t(n,e){Q(this,t),this.sink=n,this.scheduler=e,this.current=null,this.ended=!1}return t.prototype.event=function(t,n){this._disposeCurrent(t),this.current=new cn(n,t,1/0,this,this.sink,this.scheduler)},t.prototype.end=function(t){this.ended=!0,this._checkEnd(t)},t.prototype.error=function(t,n){this.ended=!0,this.sink.error(t,n)},t.prototype.dispose=function(){return this._disposeCurrent(E(this.scheduler))},t.prototype._disposeCurrent=function(t){if(null!==this.current)return this.current._dispose(t)},t.prototype._disposeInner=function(t,n){n._dispose(t),n===this.current&&(this.current=null)},t.prototype._checkEnd=function(t){this.ended&&null===this.current&&this.sink.end(t)},t.prototype._endInner=function(t,n){this._disposeInner(t,n),this._checkEnd(t)},t.prototype._errorInner=function(t,n,e){this._disposeInner(t,e),this.sink.error(t,n)},t}(),cn=function(){function t(n,e,r,i,o,s){Q(this,t),this.min=e,this.max=r,this.outer=i,this.sink=o,this.disposable=n.run(this,I(e,s))}return t.prototype.event=function(t,n){var e=Math.max(0,t+this.min);e<this.max&&this.sink.event(e,n)},t.prototype.end=function(t){this.outer._endInner(t+this.min,this)},t.prototype.error=function(t,n){this.outer._errorInner(t+this.min,n,this)},t.prototype._dispose=function(t){X(t,this.disposable,this.sink)},t}(),hn=function(t,n){return lt.create(t,n)},fn=function(t){return an(dn,t)},an=function(t,n){return st(n)?ot():new pn(t,n)},pn=function(){function t(n,e){Q(this,t),this.equals=n,this.source=e}return t.prototype.run=function(t,n){return this.source.run(new ln(this.equals,t),n)},t}(),ln=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.equals=e,i.value=void 0,i.init=!0,i}return Y(n,t),n.prototype.event=function(t,n){this.init?(this.init=!1,this.value=n,this.sink.event(t,n)):this.equals(this.value,n)||(this.value=n,this.sink.event(t,n))},n}(pt);function dn(t,n){return t===n}
/** @license MIT License (c) copyright 2010-2016 original author or authors */var vn=function(t,n){return new yn(t,n)},yn=function(){function t(n,e){Q(this,t),this.maxSignal=n,this.source=e}return t.prototype.run=function(t,n){var e=new kt,r=this.source.run(t,n),i=this.maxSignal.run(new mn(t,e),n);return e.setDisposable(M(r,i)),e},t}(),mn=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,e));return i.disposable=r,i}return Y(n,t),n.prototype.event=function(t,n){this.disposable.dispose(),this.sink.end(t)},n.prototype.end=function(){},n}(pt),gn=function(t,n){return t<=0?n:new wn(t,n)},wn=function(){function t(n,e){Q(this,t),this.dt=n,this.source=e}return t.prototype.run=function(t,n){var e=new kn(this.dt,t,n);return M(e,this.source.run(e,n))},t}(),kn=function(t){function n(e,r,i){Q(this,n);var o=Z(this,t.call(this,r));return o.dt=e,o.scheduler=i,o.tasks=[],o}return Y(n,t),n.prototype.dispose=function(){this.tasks.forEach(j)},n.prototype.event=function(t,n){this.tasks.push(x(this.dt,tt(n,this.sink),this.scheduler))},n.prototype.end=function(t){this.tasks.push(x(this.dt,nt(this.sink),this.scheduler))},n}(pt),bn=function(t,n){return st(n)?ot():new _n(t,n)},_n=function(){function t(n,e){Q(this,t),this.dt=n,this.source=e}return t.prototype.run=function(t,n){return new On(this.dt,this.source,t,n)},t}(),On=function(){function t(n,e,r,i){Q(this,t),this.dt=n,this.sink=r,this.scheduler=i,this.value=void 0,this.timer=null,this.disposable=e.run(this,i)}return t.prototype.event=function(t,n){this._clearTimer(),this.value=n,this.timer=x(this.dt,new Sn(this,n),this.scheduler)},t.prototype._event=function(t,n){this._clearTimer(),this.sink.event(t,n)},t.prototype.end=function(t){this._clearTimer()&&(this.sink.event(t,this.value),this.value=void 0),this.sink.end(t)},t.prototype.error=function(t,n){this._clearTimer(),this.sink.error(t,n)},t.prototype.dispose=function(){this._clearTimer(),this.disposable.dispose()},t.prototype._clearTimer=function(){return null!==this.timer&&(this.timer.dispose(),this.timer=null,!0)},t}(),Sn=function(){function t(n,e){Q(this,t),this.debounce=n,this.value=e}return t.prototype.run=function(t){this.debounce._event(t,this.value)},t.prototype.error=function(t,n){this.debounce.error(t,n)},t.prototype.dispose=function(){},t}();
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Tn(t,n,e){try{e.event(t,n)}catch(n){e.error(t,n)}}function En(t,n){try{n.end(t)}catch(e){n.error(t,e)}}var An=function(t){return t instanceof xn||st(t)?t:new xn(t)},xn=function(){function t(n){Q(this,t),this.source=new jn(n)}return t.prototype.run=function(t,n){return this.source.run(t,n)},t}(),jn=function(){function n(t){Q(this,n),this.source=t,this.sinks=[],this.disposable=P()}return n.prototype.run=function(t,n){return 1===this.add(t)&&(this.disposable=this.source.run(this,n)),N(new In(this,t))},n.prototype.dispose=function(){var t=this.disposable;return this.disposable=P(),t.dispose()},n.prototype.add=function(n){return this.sinks=t(n,this.sinks),this.sinks.length},n.prototype.remove=function(t){var n=r(t,this.sinks);return n>=0&&(this.sinks=e(n,this.sinks)),this.sinks.length},n.prototype.event=function(t,n){var e=this.sinks;if(1===e.length)return e[0].event(t,n);for(var r=0;r<e.length;++r)Tn(t,n,e[r])},n.prototype.end=function(t){for(var n=this.sinks,e=0;e<n.length;++e)En(t,n[e])},n.prototype.error=function(t,n){for(var e=this.sinks,r=0;r<e.length;++r)e[r].error(t,n)},n}(),In=function(){function t(n,e){Q(this,t),this.source=n,this.sink=e}return t.prototype.dispose=function(){0===this.source.remove(this.sink)&&this.source.dispose()},t}(),qn=o(St),Hn=s(jt),Rn=o(Pt),Pn=o(zt),zn=o(Nt),Nn=o(Jt),Cn=s(tn),Dn=o(hn),Mn=o(bt),Bn=o(vn),Un=o(gn),Vn=o(bn),Ln=function(t,n,e){return void 0===e&&(e=!1),new Xn(t,n,e)},Wn=function(t,n){return void 0===n&&(n=!1),Ln("focusin",t,n)},Fn=function(t,n){return void 0===n&&(n=!1),Ln("focusout",t,n)},Jn=function(t,n){return void 0===n&&(n=!1),Ln("change",t,n)},Kn=function(t,n){return void 0===n&&(n=!1),Ln("resize",t,n)},Xn=function(t,n,e){this.event=t,this.node=n,this.capture=e};Xn.prototype.run=function(t,n){var e=this,r=function(e){return function(t,n,e){try{e.event(t,n)}catch(n){e.error(t,n)}}(E(n),e,t)};return this.node.addEventListener(this.event,r,this.capture),{dispose:function(){return e.node.removeEventListener(e.event,r,e.capture)}}};var Gn=function(){var t=[];return[function(n){return Qn(t,n)},new Yn(t)]},Qn=function(t,n){return t.forEach((function(t){var e=t.sink;return function(t,n,e){try{e.event(t,n)}catch(n){e.error(t,n)}}(t.scheduler.currentTime(),n,e)}))},Yn=function(){function t(t){this.sinks=t}return t.prototype.run=function(t,n){var e={sink:t,scheduler:n};return this.sinks.push(e),new Zn(e,this.sinks)},t}(),Zn=function(){function t(t,n){this.sink=t,this.sinks=n}return t.prototype.dispose=function(){var t=this.sinks.indexOf(this.sink);t>=0&&this.sinks.splice(t,1)},t}();function $n(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function te(t){return function n(e){return 0===arguments.length||$n(e)?n:t.apply(this,arguments)}}var ne=te((function(t){return function(){return t}}));function ee(t){return function n(e,r){switch(arguments.length){case 0:return n;case 1:return $n(e)?n:te((function(n){return t(e,n)}));default:return $n(e)&&$n(r)?n:$n(e)?te((function(n){return t(n,r)})):$n(r)?te((function(n){return t(e,n)})):t(e,r)}}}function re(t){return function n(e,r,i){switch(arguments.length){case 0:return n;case 1:return $n(e)?n:ee((function(n,r){return t(e,n,r)}));case 2:return $n(e)&&$n(r)?n:$n(e)?ee((function(n,e){return t(n,r,e)})):$n(r)?ee((function(n,r){return t(e,n,r)})):te((function(n){return t(e,r,n)}));default:return $n(e)&&$n(r)&&$n(i)?n:$n(e)&&$n(r)?ee((function(n,e){return t(n,e,i)})):$n(e)&&$n(i)?ee((function(n,e){return t(n,r,e)})):$n(r)&&$n(i)?ee((function(n,r){return t(e,n,r)})):$n(e)?te((function(n){return t(n,r,i)})):$n(r)?te((function(n){return t(e,n,i)})):$n(i)?te((function(n){return t(e,r,n)})):t(e,r,i)}}}var ie=re((function(t,n,e){var r={};for(var i in e)r[i]=e[i];return r[t]=n,r})),oe=ee((function(t,n){return n(t)}));function se(t,n){switch(t){case 0:return function(){return n.apply(this,arguments)};case 1:return function(t){return n.apply(this,arguments)};case 2:return function(t,e){return n.apply(this,arguments)};case 3:return function(t,e,r){return n.apply(this,arguments)};case 4:return function(t,e,r,i){return n.apply(this,arguments)};case 5:return function(t,e,r,i,o){return n.apply(this,arguments)};case 6:return function(t,e,r,i,o,s){return n.apply(this,arguments)};case 7:return function(t,e,r,i,o,s,u){return n.apply(this,arguments)};case 8:return function(t,e,r,i,o,s,u,c){return n.apply(this,arguments)};case 9:return function(t,e,r,i,o,s,u,c,h){return n.apply(this,arguments)};case 10:return function(t,e,r,i,o,s,u,c,h,f){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function ue(t,n){return function(){return n.call(this,t.apply(this,arguments))}}var ce=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function he(t){return"[object String]"===Object.prototype.toString.call(t)}var fe=te((function(t){return!!ce(t)||!!t&&("object"==typeof t&&(!he(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),ae=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},t}();var pe=ee((function(t,n){return se(t.length,(function(){return t.apply(n,arguments)}))}));function le(t,n,e){for(var r=e.next();!r.done;){if((n=t["@@transducer/step"](n,r.value))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r=e.next()}return t["@@transducer/result"](n)}function de(t,n,e,r){return t["@@transducer/result"](e[r](pe(t["@@transducer/step"],t),n))}var ve="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function ye(t,n,e){if("function"==typeof t&&(t=function(t){return new ae(t)}(t)),fe(e))return function(t,n,e){for(var r=0,i=e.length;r<i;){if((n=t["@@transducer/step"](n,e[r]))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r+=1}return t["@@transducer/result"](n)}(t,n,e);if("function"==typeof e["fantasy-land/reduce"])return de(t,n,e,"fantasy-land/reduce");if(null!=e[ve])return le(t,n,e[ve]());if("function"==typeof e.next)return le(t,n,e);if("function"==typeof e.reduce)return de(t,n,e,"reduce");throw new TypeError("reduce: list must be array or iterable")}var me=re(ye);function ge(t,n){return function(){var e=arguments.length;if(0===e)return n();var r=arguments[e-1];return ce(r)||"function"!=typeof r[t]?n.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,e-1))}}var we=te(ge("tail",re(ge("slice",(function(t,n,e){return Array.prototype.slice.call(e,t,n)})))(1,1/0)));function ke(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return se(arguments[0].length,me(ue,arguments[0],we(arguments)))}var be=te((function(t){return he(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}));function _e(){if(0===arguments.length)throw new Error("compose requires at least one argument");return ke.apply(this,be(arguments))}var Oe=ee((function(t,n){return 1===t?te(n):se(t,function t(n,e,r){return function(){for(var i=[],o=0,s=n,u=0;u<e.length||o<arguments.length;){var c;u<e.length&&(!$n(e[u])||o>=arguments.length)?c=e[u]:(c=arguments[o],o+=1),i[u]=c,$n(c)||(s-=1),u+=1}return s<=0?r.apply(this,i):se(s,t(n,i,r))}}(t,[],n))})),Se=te((function(t){return Oe(t.length,t)}));function Te(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}function Ee(t,n,e){for(var r=0,i=e.length;r<i;){if(t(n,e[r]))return!0;r+=1}return!1}function Ae(t,n){return Object.prototype.hasOwnProperty.call(n,t)}var xe="function"==typeof Object.is?Object.is:function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n},je=Object.prototype.toString,Ie=function(){return"[object Arguments]"===je.call(arguments)?function(t){return"[object Arguments]"===je.call(t)}:function(t){return Ae("callee",t)}}(),qe=!{toString:null}.propertyIsEnumerable("toString"),He=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Re=function(){return arguments.propertyIsEnumerable("length")}(),Pe=function(t,n){for(var e=0;e<t.length;){if(t[e]===n)return!0;e+=1}return!1},ze="function"!=typeof Object.keys||Re?te((function(t){if(Object(t)!==t)return[];var n,e,r=[],i=Re&&Ie(t);for(n in t)!Ae(n,t)||i&&"length"===n||(r[r.length]=n);if(qe)for(e=He.length-1;e>=0;)Ae(n=He[e],t)&&!Pe(r,n)&&(r[r.length]=n),e-=1;return r})):te((function(t){return Object(t)!==t?[]:Object.keys(t)})),Ne=te((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function Ce(t,n,e,r){var i=Te(t);function o(t,n){return De(t,n,e.slice(),r.slice())}return!Ee((function(t,n){return!Ee(o,n,t)}),Te(n),i)}function De(t,n,e,r){if(xe(t,n))return!0;var i,o,s=Ne(t);if(s!==Ne(n))return!1;if(null==t||null==n)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof n["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](n)&&"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof n.equals)return"function"==typeof t.equals&&t.equals(n)&&"function"==typeof n.equals&&n.equals(t);switch(s){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(i=t.constructor,null==(o=String(i).match(/^function (\w*)/))?"":o[1]))return t===n;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof n||!xe(t.valueOf(),n.valueOf()))return!1;break;case"Date":if(!xe(t.valueOf(),n.valueOf()))return!1;break;case"Error":return t.name===n.name&&t.message===n.message;case"RegExp":if(t.source!==n.source||t.global!==n.global||t.ignoreCase!==n.ignoreCase||t.multiline!==n.multiline||t.sticky!==n.sticky||t.unicode!==n.unicode)return!1}for(var u=e.length-1;u>=0;){if(e[u]===t)return r[u]===n;u-=1}switch(s){case"Map":return t.size===n.size&&Ce(t.entries(),n.entries(),e.concat([t]),r.concat([n]));case"Set":return t.size===n.size&&Ce(t.values(),n.values(),e.concat([t]),r.concat([n]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=ze(t);if(c.length!==ze(n).length)return!1;var h=e.concat([t]),f=r.concat([n]);for(u=c.length-1;u>=0;){var a=c[u];if(!Ae(a,n)||!De(n[a],t[a],h,f))return!1;u-=1}return!0}var Me=ee((function(t,n){return De(t,n,[],[])}));function Be(t,n){return function(t,n,e){var r,i;if("function"==typeof t.indexOf)switch(typeof n){case"number":if(0===n){for(r=1/n;e<t.length;){if(0===(i=t[e])&&1/i===r)return e;e+=1}return-1}if(n!=n){for(;e<t.length;){if("number"==typeof(i=t[e])&&i!=i)return e;e+=1}return-1}return t.indexOf(n,e);case"string":case"boolean":case"function":case"undefined":return t.indexOf(n,e);case"object":if(null===n)return t.indexOf(n,e)}for(;e<t.length;){if(Me(t[e],n))return e;e+=1}return-1}(n,t,0)>=0}var Ue=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!Ve(t,!0,this)},t.prototype.has=function(t){return Ve(t,!1,this)},t}();function Ve(t,n,e){var r,i=typeof t;switch(i){case"string":case"number":return 0===t&&1/t==-1/0?!!e._items["-0"]||(n&&(e._items["-0"]=!0),!1):null!==e._nativeSet?n?(r=e._nativeSet.size,e._nativeSet.add(t),e._nativeSet.size===r):e._nativeSet.has(t):i in e._items?t in e._items[i]||(n&&(e._items[i][t]=!0),!1):(n&&(e._items[i]={},e._items[i][t]=!0),!1);case"boolean":if(i in e._items){var o=t?1:0;return!!e._items[i][o]||(n&&(e._items[i][o]=!0),!1)}return n&&(e._items[i]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==e._nativeSet?n?(r=e._nativeSet.size,e._nativeSet.add(t),e._nativeSet.size===r):e._nativeSet.has(t):i in e._items?!!Be(t,e._items[i])||(n&&e._items[i].push(t),!1):(n&&(e._items[i]=[t]),!1);case"undefined":return!!e._items[i]||(n&&(e._items[i]=!0),!1);case"object":if(null===t)return!!e._items.null||(n&&(e._items.null=!0),!1);default:return(i=Object.prototype.toString.call(t))in e._items?!!Be(t,e._items[i])||(n&&e._items[i].push(t),!1):(n&&(e._items[i]=[t]),!1)}}var Le=ee((function(t,n){for(var e=[],r=0,i=t.length,o=n.length,s=new Ue,u=0;u<o;u+=1)s.add(n[u]);for(;r<i;)s.add(t[r])&&(e[e.length]=t[r]),r+=1;return e})),We=ee((function(t,n){return De(t,n,[],[])}));function Fe(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return se(arguments[0].length,me(ue,arguments[0],we(arguments)))}var Je=te((function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():ce(t)?[]:he(t)?"":function(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)?{}:Ie(t)?function(){return arguments}():void 0})),Ke=te((function(t){return null!=t&&Me(t,Je(t))})),Xe=ee(xe),Ge=!{toString:null}.propertyIsEnumerable("toString"),Qe=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Ye=function(){return arguments.propertyIsEnumerable("length")}(),Ze=function(t,n){for(var e=0;e<t.length;){if(t[e]===n)return!0;e+=1}return!1},$e="function"!=typeof Object.keys||Ye?te((function(t){if(Object(t)!==t)return[];var n,e,r=[],i=Ye&&Ie(t);for(n in t)!Ae(n,t)||i&&"length"===n||(r[r.length]=n);if(Ge)for(e=Qe.length-1;e>=0;)Ae(n=Qe[e],t)&&!Ze(r,n)&&(r[r.length]=n),e-=1;return r})):te((function(t){return Object(t)!==t?[]:Object.keys(t)})),tr=re((function(t,n,e){return Me(n,e[t])}));const nr="visualViewport"in window;function er(){return nr}var rr={subscribe:function(t){if(!er())return console.warn("On-Screen-Keyboard detection not supported on this version of iOS"),()=>void 0;const[n,e]=Gn(),r=q(),i=Fe(Pn(t=>t.target.height===window.innerHeight?"hidden":"visible"),fn,Bn(e),zn(t))(Kn(window.visualViewport));return qn(i,r),n},isSupported:er};const ir=/iPhone/.test(navigator.userAgent),or=()=>screen.orientation.type.startsWith("portrait")?"portrait":"landscape",sr=Se(_e(Ft,Cn((t,n)=>t?ot():at(n)))),ur=()=>document.activeElement&&document.activeElement!==document.body;var cr={subscribe:function(t){if(ir)return rr.subscribe(t);const n=Math.max(700,700)-500+200,[e,r]=Gn(),i=q(),o=window.innerHeight,s=screen.availHeight-window.innerHeight,u=Nn(Wn(document.documentElement),Fn(document.documentElement)),c=oe(Ln("visibilitychange",document))(Fe(Pn(()=>document.visibilityState),Rn(document.visibilityState))),h=oe(u)(Fe(Pn(t=>"focusin"===t.type?at(!1):ct(700,!0)),on,Rn(!ur()),fn,An)),f=oe(Jn(screen.orientation))(Fe(Cn(t=>t||window.innerHeight===o,h),Vn(700),Pn(t=>({screenOrientation:or(),height:t?window.innerHeight:screen.availHeight-s})))),a=oe(h)(Fe(Dn(Xe(!0)),Pn(()=>({screenOrientation:or(),height:window.innerHeight})))),p=oe(Kt([a,f]))(Fe(Un(1e3),sr(Pn(We("hidden"),c)),Hn((t,{screenOrientation:n,height:e})=>ie(n,e,t),{[or()]:window.innerHeight}),Mn(_e(Ke,Le(["portrait","landscape"]),$e)))),l=oe(Kn(window))(Fe(Vn(500),Pn(t=>({width:t.target.innerWidth,height:t.target.innerHeight})),Hn((t,n)=>({...n,isJustHeightResize:t.width===n.width,dH:n.height-t.height}),{width:window.innerWidth,height:window.innerHeight,isJustHeightResize:!1,dH:0}),Dn(tr("isJustHeightResize",!0)))),d=oe(l)(Fe(Un(n),Cn((t,{height:n,dH:e})=>{const r=t[or()];return r?n<.9*r&&e<0?at("visible"):n===r&&e>0?at("hidden"):ot():e>.1*screen.availHeight?at("hidden"):e<-.1*screen.availHeight?at("visible"):ot()},p),Ft,Nn(oe(h)(Fe(Dn(Xe(!0)),Pn(ne("hidden"))))),Bn(r),fn));return qn(zn(t,d),i),e},isSupported:function(){return!ir||rr.isSupported()}};export default cr;

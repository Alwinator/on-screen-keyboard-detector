/* @license
	On-screen keyboard detector (OSKD) v.2.0.3
	(c) 2020-2021 Matthias Seemann
	OSKD may be freely distributed under the MIT license.
*/
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function t(t,n){for(var e=n.length,r=new Array(e+1),i=0;i<e;++i)r[i]=n[i];return r[e]=t,r}function n(t,n,e){for(var r=n,i=0,s=e.length;i<s;++i)r=t(r,e[i],i);return r}function e(t,n){if(t<0)throw new TypeError("i must be >= 0");var e=n.length;return 0===e||t>=e?n:1===e?[]:function(t,n,e){var r=new Array(e),i=void 0;for(i=0;i<t;++i)r[i]=n[i];for(i=t;i<e;++i)r[i]=n[i+1];return r}(t,n,e-1)}function r(t,n){for(var e=0,r=n.length;e<r;++e)if(t===n[e])return e;return-1}
/** @license MIT License (c) copyright 2010-2016 original author or authors */var i=function(t){return t};function s(t){return function n(e,r){switch(arguments.length){case 0:return n;case 1:return function(n){return t(e,n)};default:return t(e,r)}}}function o(t){return function n(e,r,i){switch(arguments.length){case 0:return n;case 1:return s((function(n,r){return t(e,n,r)}));case 2:return function(n){return t(e,r,n)};default:return t(e,r,i)}}}var u=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},c=function(){function t(n,e,r,i,s){u(this,t),this.time=n,this.localOffset=e,this.period=r,this.task=i,this.scheduler=s,this.active=!0}return t.prototype.run=function(){return this.task.run(this.time-this.localOffset)},t.prototype.error=function(t){return this.task.error(this.time-this.localOffset,t)},t.prototype.dispose=function(){return this.active=!1,this.scheduler.cancel(this),this.task.dispose()},t}(),h=function(){function t(n,e){u(this,t),this.origin=n,this.scheduler=e}return t.prototype.currentTime=function(){return this.scheduler.currentTime()-this.origin},t.prototype.scheduleTask=function(t,n,e,r){return this.scheduler.scheduleTask(t+this.origin,n,e,r)},t.prototype.relative=function(n){return new t(n+this.origin,this.scheduler)},t.prototype.cancel=function(t){return this.scheduler.cancel(t)},t.prototype.cancelAll=function(t){return this.scheduler.cancelAll(t)},t}(),f=function(t){return Promise.resolve(t).then(a)};
/** @license MIT License (c) copyright 2010-2017 original author or authors */function a(t){try{return t.run()}catch(n){return t.error(n)}}
/** @license MIT License (c) copyright 2010-2017 original author or authors */var p=function(){function t(n,e){var r=this;u(this,t),this.timer=n,this.timeline=e,this._timer=null,this._nextArrival=1/0,this._runReadyTasksBound=function(){return r._runReadyTasks(r.currentTime())}}return t.prototype.currentTime=function(){return this.timer.now()},t.prototype.scheduleTask=function(t,n,e,r){var i=this.currentTime()+Math.max(0,n),s=new c(i,t,e,r,this);return this.timeline.add(s),this._scheduleNextRun(),s},t.prototype.relative=function(t){return new h(t,this)},t.prototype.cancel=function(t){t.active=!1,this.timeline.remove(t)&&this._reschedule()},t.prototype.cancelAll=function(t){this.timeline.removeAll(t),this._reschedule()},t.prototype._reschedule=function(){this.timeline.isEmpty()?this._unschedule():this._scheduleNextRun(this.currentTime())},t.prototype._unschedule=function(){this.timer.clearTimer(this._timer),this._timer=null},t.prototype._scheduleNextRun=function(){if(!this.timeline.isEmpty()){var t=this.timeline.nextArrival();null===this._timer?this._scheduleNextArrival(t):t<this._nextArrival&&(this._unschedule(),this._scheduleNextArrival(t))}},t.prototype._scheduleNextArrival=function(t){this._nextArrival=t;var n=Math.max(0,t-this.currentTime());this._timer=this.timer.setTimer(this._runReadyTasksBound,n)},t.prototype._runReadyTasks=function(){this._timer=null,this.timeline.runTasks(this.currentTime(),a),this._scheduleNextRun()},t}(),l=function(){function t(){u(this,t),this.tasks=[]}return t.prototype.nextArrival=function(){return this.isEmpty()?1/0:this.tasks[0].time},t.prototype.isEmpty=function(){return 0===this.tasks.length},t.prototype.add=function(t){v(t,this.tasks)},t.prototype.remove=function(t){var n=g(y(t),this.tasks);if(n>=0&&n<this.tasks.length){var e=this.tasks[n].events,i=r(t,e);if(i>=0)return e.splice(i,1),0===e.length&&this.tasks.splice(n,1),!0}return!1},t.prototype.removeAll=function(t){for(var n=0;n<this.tasks.length;++n)m(t,this.tasks[n])},t.prototype.runTasks=function(t,n){for(var e=this.tasks,r=e.length,i=0;i<r&&e[i].time<=t;)++i;this.tasks=e.slice(i);for(var s=0;s<i;++s)this.tasks=d(n,e[s].events,this.tasks)},t}();
/** @license MIT License (c) copyright 2010-2017 original author or authors */function d(t,n,e){for(var r=0;r<n.length;++r){var i=n[r];i.active&&(t(i),i.period>=0&&i.active&&(i.time=i.time+i.period,v(i,e)))}return e}function v(t,n){var e=n.length,r=y(t);if(0!==e){var i=g(r,n);i>=e?n.push(w(r,[t])):function(t,n,e,r){var i=n[r];e===i.time?function(t,n){0===n.length||t.time>=n[n.length-1].time?n.push(t):function(t,n){for(var e=0;e<n.length;e++)if(t.time<n[e].time){n.splice(e,0,t);break}}(t,n)}(t,i.events):n.splice(r,0,w(e,[t]))}(t,n,r,i)}else n.push(w(r,[t]))}function y(t){return Math.floor(t.time)}function m(t,n){n.events=function(t,n){for(var e,r=n.length,i=new Array(r),s=0,o=0;o<r;++o)t(e=n[o])||(i[s]=e,++s);return i.length=s,i}(t,n.events)}function g(t,n){for(var e=0,r=n.length,i=void 0,s=void 0;e<r;){if(t===(s=n[i=Math.floor((e+r)/2)]).time)return i;t<s.time?r=i:e=i+1}return r}var w=function(t,n){return{time:t,events:n}},k=function(){function t(n){u(this,t),this._clock=n}return t.prototype.now=function(){return this._clock.now()},t.prototype.setTimer=function(t,n){return n<=0?function(t){var n=new _(t);return f(n),n}
/** @license MIT License (c) copyright 2010-2017 original author or authors */(t):setTimeout(t,n)},t.prototype.clearTimer=function(t){return t instanceof _?t.cancel():clearTimeout(t)},t}(),_=function(){function t(n){u(this,t),this.f=n,this.active=!0}return t.prototype.run=function(){return this.active&&this.f()},t.prototype.error=function(t){throw t},t.prototype.cancel=function(){this.active=!1},t}();
/** @license MIT License (c) copyright 2010-2017 original author or authors */var b=function(){function t(n,e){u(this,t),this.origin=e,this.clock=n}return t.prototype.now=function(){return this.clock.now()-this.origin},t}(),O=function(){function t(n,e){u(this,t),this.origin=e,this.hrtime=n}return t.prototype.now=function(){var t=this.hrtime(this.origin);return(1e9*t[0]+t[1])/1e6},t}(),T=function(t){return new b(t,t.now())},A=function(){return"undefined"!=typeof performance&&"function"==typeof performance.now?T(performance):"undefined"!=typeof process&&"function"==typeof process.hrtime?new O(process.hrtime,process.hrtime()):T(Date)},E=function(t){return t.currentTime()},S=s((function(t,n){return n.scheduleTask(0,0,-1,t)})),x=o((function(t,n,e){return e.scheduleTask(0,t,-1,n)})),j=function(t){return t.dispose()},I=s((function(t,n){return new h(t,n)})),H=function(){return new p(q(),new l)},q=function(){return new k(A())},z=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},R=function(){return N},N=new(function(){function t(){z(this,t)}return t.prototype.dispose=function(){},t}()),C=function(t){return new P(t)},P=function(){function t(n){z(this,t),this.disposed=!1,this.disposable=n}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposable.dispose(),this.disposable=void 0)},t}(),D=function(t){var e=n(V,[],t);return 0===e.length?R():new B(e)},M=s((function(t,n){return D([t,n])})),V=function(n,e){return function(t){return t===N}(e)?n:e instanceof B?n.concat(e.disposables):t(e,n)},B=function(){function t(n){z(this,t),this.disposables=n}return t.prototype.dispose=function(){W(L(this.disposables))},t}(),L=function(t){return n(U,[],t)},U=function(t,n){try{n.dispose()}catch(n){t.push(n)}return t},W=function(t){if(t.length>0)throw new F(t.length+" errors",t)},F=function(t){function n(e,r){t.call(this,e),this.message=e,this.name=n.name,this.errors=r,t.captureStackTrace&&t.captureStackTrace(this,n),this.stack=""+this.stack+J(this.errors)}return n.prototype=Object.create(t.prototype),n}(Error),J=function(t){return n(K,"",t)},K=function(t,n,e){return t+"\n["+(e+1)+"] "+n.stack},X=o((function(t,n,e){try{n.dispose()}catch(n){e.error(t,n)}}));function G(t){throw t}var Q=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},Y=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},Z=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},$=function(t,n,e){return new et(t,n,e)},tt=function(t,n){return $(rt,t,n)},nt=function(t){return $(it,void 0,t)},et=function(){function t(n,e,r){Q(this,t),this._run=n,this.value=e,this.sink=r,this.active=!0}return t.prototype.dispose=function(){this.active=!1},t.prototype.run=function(t){if(this.active){var n=this._run;n(t,this.value,this.sink)}},t.prototype.error=function(t,n){if(!this.active)
/** @license MIT License (c) copyright 2010-2016 original author or authors */
return function(t){setTimeout(G,0,t)}(n);this.sink.error(t,n)},t}(),rt=function(t,n,e){return e.event(t,n)},it=function(t,n,e){return e.end(t)},st=function(){return ut},ot=function(t){return t===ut},ut=new(function(){function t(){Q(this,t)}return t.prototype.run=function(t,n){return S(nt(t),n)},t}()),ct=function(t,n){return new ht(t,n)},ht=function(){function t(n,e){Q(this,t),this.time=n,this.value=e}return t.prototype.run=function(t,n){return x(this.time,$(ft,this.value,t),n)},t}();function ft(t,n,e){e.event(t,n),e.end(t)}
/** @license MIT License (c) copyright 2010-2017 original author or authors */var at=function(t){return ct(0,t)},pt=function(){function t(n){Q(this,t),this.sink=n}return t.prototype.event=function(t,n){return this.sink.event(t,n)},t.prototype.end=function(t){return this.sink.end(t)},t.prototype.error=function(t,n){return this.sink.error(t,n)},t}(),lt=function(){function t(n,e){Q(this,t),this.p=n,this.source=e}return t.prototype.run=function(t,n){return this.source.run(new dt(this.p,t),n)},t.create=function(n,e){return ot(e)?e:e instanceof t?new t(vt(e.p,n),e.source):new t(n,e)},t}(),dt=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.p=e,i}return Y(n,t),n.prototype.event=function(t,n){(0,this.p)(n)&&this.sink.event(t,n)},n}(pt),vt=function(t,n){return function(e){return t(e)&&n(e)}},yt=function(){function t(n,e,r){Q(this,t),this.p=n,this.f=e,this.source=r}return t.prototype.run=function(t,n){return this.source.run(new mt(this.p,this.f,t),n)},t}(),mt=function(t){function n(e,r,i){Q(this,n);var s=Z(this,t.call(this,i));return s.p=e,s.f=r,s}return Y(n,t),n.prototype.event=function(t,n){var e=this.f;(0,this.p)(n)&&this.sink.event(t,e(n))},n}(pt),gt=function(){function t(n,e){Q(this,t),this.f=n,this.source=e}return t.prototype.run=function(t,n){return this.source.run(new wt(this.f,t),n)},t.create=function(n,e){return ot(e)?st():e instanceof t?new t(function(t,n){return function(e){return t(n(e))}}(n,e.f),e.source):e instanceof lt?new yt(e.p,n,e.source):new t(n,e)},t}(),wt=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.f=e,i}return Y(n,t),n.prototype.event=function(t,n){var e=this.f;this.sink.event(t,e(n))},n}(pt),kt=function(){function t(){Q(this,t),this.disposable=void 0,this.disposed=!1}return t.prototype.setDisposable=function(t){if(void 0!==this.disposable)throw new Error("setDisposable called more than once");this.disposable=t,this.disposed&&t.dispose()},t.prototype.dispose=function(){this.disposed||(this.disposed=!0,void 0!==this.disposable&&this.disposable.dispose())},t}(),_t=function(t,n){return ot(n)?st():new bt(t,n)},bt=function(){function t(n,e){Q(this,t),this.p=n,this.source=e}return t.prototype.run=function(t,n){return this.source.run(new Ot(this.p,t),n)},t}(),Ot=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.p=e,i.skipping=!1,i}return Y(n,t),n.prototype.event=function(t,n){if(!this.skipping){var e=this.p;this.skipping=e(n),this.sink.event(t,n),this.skipping&&this.sink.end(t)}},n}(pt),Tt=s((function(t,n){return new Promise((function(e,r){return function(t,n,e,r){var i=new kt,s=new At(e,r,i);i.setDisposable(t.run(s,n))}(t,n,e,r)}))}));
/** @license MIT License (c) copyright 2010-2017 original author or authors */var At=function(){function t(n,e,r){Q(this,t),this._end=n,this._error=e,this._disposable=r,this.active=!0}return t.prototype.event=function(t,n){},t.prototype.end=function(t){this.active&&this._dispose(this._error,this._end,void 0)},t.prototype.error=function(t,n){this._dispose(this._error,this._error,n)},t.prototype._dispose=function(t,n,e){this.active=!1,function(t,n,e,r){try{r.dispose()}catch(n){return void t(n)}n(e)}
/** @license MIT License (c) copyright 2010-2017 original author or authors */(t,n,e,this._disposable)},t}();var Et=function(){function t(n,e){Q(this,t),this.sink=e,this.offset=n}return t.prototype.event=function(t,n){this.sink.event(t+this.offset,n)},t.prototype.error=function(t,n){this.sink.error(t+this.offset,n)},t.prototype.end=function(t){this.sink.end(t+this.offset)},t}(),St=function(){function t(n,e){Q(this,t),this.origin=n,this.source=e}return t.prototype.run=function(t,n){return this.source.run(xt(this.origin,t),I(this.origin,n))},t}(),xt=function(t,n){return n instanceof Et?new Et(t+n.offset,n.sink):new Et(t,n)},jt=function(t,n,e){return new It(t,n,e)},It=function(){function t(n,e,r){Q(this,t),this.source=r,this.f=n,this.value=e}return t.prototype.run=function(t,n){var e=S(tt(this.value,t),n),r=this.source.run(new Ht(this.f,this.value,t),n);return M(e,r)},t}(),Ht=function(t){function n(e,r,i){Q(this,n);var s=Z(this,t.call(this,i));return s.f=e,s.value=r,s}return Y(n,t),n.prototype.event=function(t,n){var e=this.f;this.value=e(this.value,n),this.sink.event(t,this.value)},n}(pt),qt=function(){function t(n,e){Q(this,t),this.f=n,this.source=e}return t.prototype.run=function(t,n){return new zt(this.f,this.source,t,n)},t}(),zt=function(t){function n(e,r,i,s){Q(this,n);var o=Z(this,t.call(this,i));return o.f=e,o.scheduler=s,o.active=!0,o.disposable=C(r.run(o,s)),o}return Y(n,t),n.prototype.event=function(t,n){this.active&&this.sink.event(t,n)},n.prototype.end=function(t){this.active&&(X(t,this.disposable,this.sink),this._startNext(t,this.sink))},n.prototype._startNext=function(t,n){try{this.disposable=this._continue(this.f,t,n)}catch(e){n.error(t,e)}},n.prototype._continue=function(t,n,e){return function(t,n,e){return e.run(t,n)}(e,this.scheduler,(r=n,i=t(),new St(r,i)));var r,i},n.prototype.dispose=function(){return this.active=!1,this.disposable.dispose()},n}(pt),Rt=function(t,n){return function(t,n){return new qt(t,n)}((function(){return n}),at(t))},Nt=function(t,n){return gt.create(t,n)},Ct=function(t,n){return new Pt(t,n)},Pt=function(){function t(n,e){Q(this,t),this.source=e,this.f=n}return t.prototype.run=function(t,n){return this.source.run(new Dt(this.f,t),n)},t}(),Dt=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.f=e,i}return Y(n,t),n.prototype.event=function(t,n){(0,this.f)(n),this.sink.event(t,n)},n}(pt),Mt=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.index=e,i.active=!0,i.value=void 0,i}return Y(n,t),n.prototype.event=function(t,n){this.active&&(this.value=n,this.sink.event(t,this))},n.prototype.end=function(t){this.active&&(this.active=!1,this.sink.event(t,this))},n}(pt),Vt=function(t,n,e){return ot(e)?st():new Bt(t,n,e)},Bt=function(){function t(n,e,r){Q(this,t),this.f=n,this.concurrency=e,this.source=r}return t.prototype.run=function(t,n){return new Lt(this.f,this.concurrency,this.source,t,n)},t}(),Lt=function(){function t(n,e,r,i,s){Q(this,t),this.f=n,this.concurrency=e,this.sink=i,this.scheduler=s,this.pending=[],this.current=[],this.disposable=C(r.run(this,s)),this.active=!0}return t.prototype.event=function(t,n){this._addInner(t,n)},t.prototype._addInner=function(t,n){this.current.length<this.concurrency?this._startInner(t,n):this.pending.push(n)},t.prototype._startInner=function(t,n){try{this._initInner(t,n)}catch(n){this.error(t,n)}},t.prototype._initInner=function(t,n){var e=new Wt(t,this,this.sink);e.disposable=Ut(this.f,t,n,e,this.scheduler),this.current.push(e)},t.prototype.end=function(t){this.active=!1,X(t,this.disposable,this.sink),this._checkEnd(t)},t.prototype.error=function(t,n){this.active=!1,this.sink.error(t,n)},t.prototype.dispose=function(){this.active=!1,this.pending.length=0,this.disposable.dispose(),D(this.current).dispose()},t.prototype._endInner=function(t,n){var e=this.current.indexOf(n);e>=0&&this.current.splice(e,1),X(t,n,this),0===this.pending.length?this._checkEnd(t):this._startInner(t,this.pending.shift())},t.prototype._checkEnd=function(t){this.active||0!==this.current.length||this.sink.end(t)},t}(),Ut=function(t,n,e,r,i){return t(e).run(r,I(n,i))},Wt=function(){function t(n,e,r){Q(this,t),this.time=n,this.outer=e,this.sink=r,this.disposable=R()}return t.prototype.event=function(t,n){this.sink.event(t+this.time,n)},t.prototype.end=function(t){this.outer._endInner(t+this.time,this)},t.prototype.error=function(t,n){this.outer.error(t+this.time,n)},t.prototype.dispose=function(){return this.disposable.dispose()},t}(),Ft=function(t){return function(t,n){return Vt(i,t,n)}(1/0,t)};
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Jt(t,n){return Kt([t,n])}var Kt=function(t){return Xt(Gt(t))},Xt=function(t){return 0===t.length?st():1===t.length?t[0]:new Zt(n(Yt,[],t))},Gt=function(t){return t.filter(Qt)},Qt=function(t){return!ot(t)},Yt=function(t,n){return t.concat(n instanceof Zt?n.sources:n)},Zt=function(){function t(n){Q(this,t),this.sources=n}return t.prototype.run=function(t,n){for(var e,r=this.sources.length,i=new Array(r),s=new Array(r),o=new $t(i,s,t),u=0;u<r;++u)e=s[u]=new Mt(u,o),i[u]=this.sources[u].run(e,n);return D(i)},t}(),$t=function(t){function n(e,r,i){Q(this,n);var s=Z(this,t.call(this,i));return s.disposables=e,s.activeCount=r.length,s}return Y(n,t),n.prototype.event=function(t,n){n.active?this.sink.event(t,n.value):this._dispose(t,n.index)},n.prototype._dispose=function(t,n){X(t,this.disposables[n],this.sink),0==--this.activeCount&&this.sink.end(t)},n}(pt),tn=function(t,n,e){return ot(e)||ot(n)?st():new nn(t,n,e)},nn=function(){function t(n,e,r){Q(this,t),this.f=n,this.values=e,this.sampler=r}return t.prototype.run=function(t,n){var e=new en(this.f,t),r=this.values.run(e.latest,n),i=this.sampler.run(e,n);return M(i,r)},t}(),en=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.f=e,i.latest=new rn(i),i}return Y(n,t),n.prototype.event=function(t,n){if(this.latest.hasValue){var e=this.f;this.sink.event(t,e(this.latest.value,n))}},n}(pt),rn=function(t){function n(e){Q(this,n);var r=Z(this,t.call(this,e));return r.hasValue=!1,r}return Y(n,t),n.prototype.event=function(t,n){this.value=n,this.hasValue=!0},n.prototype.end=function(){},n}(pt),sn=function(t){return ot(t)?st():new on(t)},on=function(){function t(n){Q(this,t),this.source=n}return t.prototype.run=function(t,n){var e=new un(t,n);return M(e,this.source.run(e,n))},t}(),un=function(){function t(n,e){Q(this,t),this.sink=n,this.scheduler=e,this.current=null,this.ended=!1}return t.prototype.event=function(t,n){this._disposeCurrent(t),this.current=new cn(n,t,1/0,this,this.sink,this.scheduler)},t.prototype.end=function(t){this.ended=!0,this._checkEnd(t)},t.prototype.error=function(t,n){this.ended=!0,this.sink.error(t,n)},t.prototype.dispose=function(){return this._disposeCurrent(E(this.scheduler))},t.prototype._disposeCurrent=function(t){if(null!==this.current)return this.current._dispose(t)},t.prototype._disposeInner=function(t,n){n._dispose(t),n===this.current&&(this.current=null)},t.prototype._checkEnd=function(t){this.ended&&null===this.current&&this.sink.end(t)},t.prototype._endInner=function(t,n){this._disposeInner(t,n),this._checkEnd(t)},t.prototype._errorInner=function(t,n,e){this._disposeInner(t,e),this.sink.error(t,n)},t}(),cn=function(){function t(n,e,r,i,s,o){Q(this,t),this.min=e,this.max=r,this.outer=i,this.sink=s,this.disposable=n.run(this,I(e,o))}return t.prototype.event=function(t,n){var e=Math.max(0,t+this.min);e<this.max&&this.sink.event(e,n)},t.prototype.end=function(t){this.outer._endInner(t+this.min,this)},t.prototype.error=function(t,n){this.outer._errorInner(t+this.min,n,this)},t.prototype._dispose=function(t){X(t,this.disposable,this.sink)},t}(),hn=function(t,n){return lt.create(t,n)},fn=function(t){return an(dn,t)},an=function(t,n){return ot(n)?st():new pn(t,n)},pn=function(){function t(n,e){Q(this,t),this.equals=n,this.source=e}return t.prototype.run=function(t,n){return this.source.run(new ln(this.equals,t),n)},t}(),ln=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,r));return i.equals=e,i.value=void 0,i.init=!0,i}return Y(n,t),n.prototype.event=function(t,n){this.init?(this.init=!1,this.value=n,this.sink.event(t,n)):this.equals(this.value,n)||(this.value=n,this.sink.event(t,n))},n}(pt);function dn(t,n){return t===n}
/** @license MIT License (c) copyright 2010-2016 original author or authors */var vn=function(t,n){return new yn(t,n)},yn=function(){function t(n,e){Q(this,t),this.maxSignal=n,this.source=e}return t.prototype.run=function(t,n){var e=new kt,r=this.source.run(t,n),i=this.maxSignal.run(new mn(t,e),n);return e.setDisposable(M(r,i)),e},t}(),mn=function(t){function n(e,r){Q(this,n);var i=Z(this,t.call(this,e));return i.disposable=r,i}return Y(n,t),n.prototype.event=function(t,n){this.disposable.dispose(),this.sink.end(t)},n.prototype.end=function(){},n}(pt),gn=function(t,n){return t<=0?n:new wn(t,n)},wn=function(){function t(n,e){Q(this,t),this.dt=n,this.source=e}return t.prototype.run=function(t,n){var e=new kn(this.dt,t,n);return M(e,this.source.run(e,n))},t}(),kn=function(t){function n(e,r,i){Q(this,n);var s=Z(this,t.call(this,r));return s.dt=e,s.scheduler=i,s.tasks=[],s}return Y(n,t),n.prototype.dispose=function(){this.tasks.forEach(j)},n.prototype.event=function(t,n){this.tasks.push(x(this.dt,tt(n,this.sink),this.scheduler))},n.prototype.end=function(t){this.tasks.push(x(this.dt,nt(this.sink),this.scheduler))},n}(pt),_n=function(t,n){return ot(n)?st():new bn(t,n)},bn=function(){function t(n,e){Q(this,t),this.dt=n,this.source=e}return t.prototype.run=function(t,n){return new On(this.dt,this.source,t,n)},t}(),On=function(){function t(n,e,r,i){Q(this,t),this.dt=n,this.sink=r,this.scheduler=i,this.value=void 0,this.timer=null,this.disposable=e.run(this,i)}return t.prototype.event=function(t,n){this._clearTimer(),this.value=n,this.timer=x(this.dt,new Tn(this,n),this.scheduler)},t.prototype._event=function(t,n){this._clearTimer(),this.sink.event(t,n)},t.prototype.end=function(t){this._clearTimer()&&(this.sink.event(t,this.value),this.value=void 0),this.sink.end(t)},t.prototype.error=function(t,n){this._clearTimer(),this.sink.error(t,n)},t.prototype.dispose=function(){this._clearTimer(),this.disposable.dispose()},t.prototype._clearTimer=function(){return null!==this.timer&&(this.timer.dispose(),this.timer=null,!0)},t}(),Tn=function(){function t(n,e){Q(this,t),this.debounce=n,this.value=e}return t.prototype.run=function(t){this.debounce._event(t,this.value)},t.prototype.error=function(t,n){this.debounce.error(t,n)},t.prototype.dispose=function(){},t}();
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function An(t,n,e){try{e.event(t,n)}catch(n){e.error(t,n)}}function En(t,n){try{n.end(t)}catch(e){n.error(t,e)}}var Sn=function(t){return t instanceof xn||ot(t)?t:new xn(t)},xn=function(){function t(n){Q(this,t),this.source=new jn(n)}return t.prototype.run=function(t,n){return this.source.run(t,n)},t}(),jn=function(){function n(t){Q(this,n),this.source=t,this.sinks=[],this.disposable=R()}return n.prototype.run=function(t,n){return 1===this.add(t)&&(this.disposable=this.source.run(this,n)),C(new In(this,t))},n.prototype.dispose=function(){var t=this.disposable;return this.disposable=R(),t.dispose()},n.prototype.add=function(n){return this.sinks=t(n,this.sinks),this.sinks.length},n.prototype.remove=function(t){var n=r(t,this.sinks);return n>=0&&(this.sinks=e(n,this.sinks)),this.sinks.length},n.prototype.event=function(t,n){var e=this.sinks;if(1===e.length)return e[0].event(t,n);for(var r=0;r<e.length;++r)An(t,n,e[r])},n.prototype.end=function(t){for(var n=this.sinks,e=0;e<n.length;++e)En(t,n[e])},n.prototype.error=function(t,n){for(var e=this.sinks,r=0;r<e.length;++r)e[r].error(t,n)},n}(),In=function(){function t(n,e){Q(this,t),this.source=n,this.sink=e}return t.prototype.dispose=function(){0===this.source.remove(this.sink)&&this.source.dispose()},t}(),Hn=s(Tt),qn=o(jt),zn=s(Rt),Rn=s(Nt),Nn=s(Ct),Cn=s(Jt),Pn=o(tn),Dn=s(hn),Mn=s(_t),Vn=s(vn),Bn=s(gn),Ln=s(_n),Un=function(t,n,e){return void 0===e&&(e=!1),new Xn(t,n,e)},Wn=function(t,n){return void 0===n&&(n=!1),Un("focusin",t,n)},Fn=function(t,n){return void 0===n&&(n=!1),Un("focusout",t,n)},Jn=function(t,n){return void 0===n&&(n=!1),Un("change",t,n)},Kn=function(t,n){return void 0===n&&(n=!1),Un("resize",t,n)},Xn=function(t,n,e){this.event=t,this.node=n,this.capture=e};Xn.prototype.run=function(t,n){var e=this,r=function(e){return function(t,n,e){try{e.event(t,n)}catch(n){e.error(t,n)}}(E(n),e,t)};return this.node.addEventListener(this.event,r,this.capture),{dispose:function(){return e.node.removeEventListener(e.event,r,e.capture)}}};var Gn=function(){var t=[];return[function(n){return Qn(t,n)},new Yn(t)]},Qn=function(t,n){return t.forEach((function(t){var e=t.sink;return function(t,n,e){try{e.event(t,n)}catch(n){e.error(t,n)}}(t.scheduler.currentTime(),n,e)}))},Yn=function(){function t(t){this.sinks=t}return t.prototype.run=function(t,n){var e={sink:t,scheduler:n};return this.sinks.push(e),new Zn(e,this.sinks)},t}(),Zn=function(){function t(t,n){this.sink=t,this.sinks=n}return t.prototype.dispose=function(){var t=this.sinks.indexOf(this.sink);t>=0&&this.sinks.splice(t,1)},t}();function $n(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function te(t){return function n(e){return 0===arguments.length||$n(e)?n:t.apply(this,arguments)}}function ne(t){return function n(e,r){switch(arguments.length){case 0:return n;case 1:return $n(e)?n:te((function(n){return t(e,n)}));default:return $n(e)&&$n(r)?n:$n(e)?te((function(n){return t(n,r)})):$n(r)?te((function(n){return t(e,n)})):t(e,r)}}}function ee(t,n){switch(t){case 0:return function(){return n.apply(this,arguments)};case 1:return function(t){return n.apply(this,arguments)};case 2:return function(t,e){return n.apply(this,arguments)};case 3:return function(t,e,r){return n.apply(this,arguments)};case 4:return function(t,e,r,i){return n.apply(this,arguments)};case 5:return function(t,e,r,i,s){return n.apply(this,arguments)};case 6:return function(t,e,r,i,s,o){return n.apply(this,arguments)};case 7:return function(t,e,r,i,s,o,u){return n.apply(this,arguments)};case 8:return function(t,e,r,i,s,o,u,c){return n.apply(this,arguments)};case 9:return function(t,e,r,i,s,o,u,c,h){return n.apply(this,arguments)};case 10:return function(t,e,r,i,s,o,u,c,h,f){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var re=ne((function(t,n){return 1===t?te(n):ee(t,function t(n,e,r){return function(){for(var i=[],s=0,o=n,u=0;u<e.length||s<arguments.length;){var c;u<e.length&&(!$n(e[u])||s>=arguments.length)?c=e[u]:(c=arguments[s],s+=1),i[u]=c,$n(c)||(o-=1),u+=1}return o<=0?r.apply(this,i):ee(o,t(n,i,r))}}(t,[],n))}));function ie(t){return function n(e,r,i){switch(arguments.length){case 0:return n;case 1:return $n(e)?n:ne((function(n,r){return t(e,n,r)}));case 2:return $n(e)&&$n(r)?n:$n(e)?ne((function(n,e){return t(n,r,e)})):$n(r)?ne((function(n,r){return t(e,n,r)})):te((function(n){return t(e,r,n)}));default:return $n(e)&&$n(r)&&$n(i)?n:$n(e)&&$n(r)?ne((function(n,e){return t(n,e,i)})):$n(e)&&$n(i)?ne((function(n,e){return t(n,r,e)})):$n(r)&&$n(i)?ne((function(n,r){return t(e,n,r)})):$n(e)?te((function(n){return t(n,r,i)})):$n(r)?te((function(n){return t(e,n,i)})):$n(i)?te((function(n){return t(e,r,n)})):t(e,r,i)}}}var se=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function oe(t){return"[object String]"===Object.prototype.toString.call(t)}var ue=te((function(t){return!!se(t)||!!t&&("object"==typeof t&&(!oe(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),ce=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},t}();var he=ne((function(t,n){return ee(t.length,(function(){return t.apply(n,arguments)}))}));function fe(t,n,e){for(var r=e.next();!r.done;){if((n=t["@@transducer/step"](n,r.value))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r=e.next()}return t["@@transducer/result"](n)}function ae(t,n,e,r){return t["@@transducer/result"](e[r](he(t["@@transducer/step"],t),n))}var pe="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function le(t,n,e){if("function"==typeof t&&(t=function(t){return new ce(t)}(t)),ue(e))return function(t,n,e){for(var r=0,i=e.length;r<i;){if((n=t["@@transducer/step"](n,e[r]))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r+=1}return t["@@transducer/result"](n)}(t,n,e);if("function"==typeof e["fantasy-land/reduce"])return ae(t,n,e,"fantasy-land/reduce");if(null!=e[pe])return fe(t,n,e[pe]());if("function"==typeof e.next)return fe(t,n,e);if("function"==typeof e.reduce)return ae(t,n,e,"reduce");throw new TypeError("reduce: list must be array or iterable")}function de(t,n){return Object.prototype.hasOwnProperty.call(n,t)}var ve=Object.prototype.toString,ye=function(){return"[object Arguments]"===ve.call(arguments)?function(t){return"[object Arguments]"===ve.call(t)}:function(t){return de("callee",t)}}(),me=!{toString:null}.propertyIsEnumerable("toString"),ge=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],we=function(){return arguments.propertyIsEnumerable("length")}(),ke=function(t,n){for(var e=0;e<t.length;){if(t[e]===n)return!0;e+=1}return!1},_e="function"!=typeof Object.keys||we?te((function(t){if(Object(t)!==t)return[];var n,e,r=[],i=we&&ye(t);for(n in t)!de(n,t)||i&&"length"===n||(r[r.length]=n);if(me)for(e=ge.length-1;e>=0;)de(n=ge[e],t)&&!ke(r,n)&&(r[r.length]=n),e-=1;return r})):te((function(t){return Object(t)!==t?[]:Object.keys(t)})),be=ie(le),Oe=te((function(t){return function(){return t}})),Te=ne((function(t,n){return n(t)})),Ae=ie((function(t,n,e){var r={};for(var i in e)r[i]=e[i];return r[t]=n,r})),Ee=te((function(t){return re(t.length,t)})),Se=te((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function xe(t,n){return function(){return n.call(this,t.apply(this,arguments))}}function je(t,n){return function(){var e=arguments.length;if(0===e)return n();var r=arguments[e-1];return se(r)||"function"!=typeof r[t]?n.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,e-1))}}var Ie=te(je("tail",ie(je("slice",(function(t,n,e){return Array.prototype.slice.call(e,t,n)})))(1,1/0)));function He(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return ee(arguments[0].length,be(xe,arguments[0],Ie(arguments)))}var qe=te((function(t){return oe(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}));function ze(){if(0===arguments.length)throw new Error("compose requires at least one argument");return He.apply(this,qe(arguments))}function Re(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}function Ne(t,n,e){for(var r=0,i=e.length;r<i;){if(t(n,e[r]))return!0;r+=1}return!1}var Ce="function"==typeof Object.is?Object.is:function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n};function Pe(t,n,e,r){var i=Re(t);function s(t,n){return De(t,n,e.slice(),r.slice())}return!Ne((function(t,n){return!Ne(s,n,t)}),Re(n),i)}function De(t,n,e,r){if(Ce(t,n))return!0;var i,s,o=Se(t);if(o!==Se(n))return!1;if(null==t||null==n)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof n["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](n)&&"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof n.equals)return"function"==typeof t.equals&&t.equals(n)&&"function"==typeof n.equals&&n.equals(t);switch(o){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(i=t.constructor,null==(s=String(i).match(/^function (\w*)/))?"":s[1]))return t===n;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof n||!Ce(t.valueOf(),n.valueOf()))return!1;break;case"Date":if(!Ce(t.valueOf(),n.valueOf()))return!1;break;case"Error":return t.name===n.name&&t.message===n.message;case"RegExp":if(t.source!==n.source||t.global!==n.global||t.ignoreCase!==n.ignoreCase||t.multiline!==n.multiline||t.sticky!==n.sticky||t.unicode!==n.unicode)return!1}for(var u=e.length-1;u>=0;){if(e[u]===t)return r[u]===n;u-=1}switch(o){case"Map":return t.size===n.size&&Pe(t.entries(),n.entries(),e.concat([t]),r.concat([n]));case"Set":return t.size===n.size&&Pe(t.values(),n.values(),e.concat([t]),r.concat([n]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=_e(t);if(c.length!==_e(n).length)return!1;var h=e.concat([t]),f=r.concat([n]);for(u=c.length-1;u>=0;){var a=c[u];if(!de(a,n)||!De(n[a],t[a],h,f))return!1;u-=1}return!0}var Me=ne((function(t,n){return De(t,n,[],[])}));function Ve(t,n){return function(t,n,e){var r,i;if("function"==typeof t.indexOf)switch(typeof n){case"number":if(0===n){for(r=1/n;e<t.length;){if(0===(i=t[e])&&1/i===r)return e;e+=1}return-1}if(n!=n){for(;e<t.length;){if("number"==typeof(i=t[e])&&i!=i)return e;e+=1}return-1}return t.indexOf(n,e);case"string":case"boolean":case"function":case"undefined":return t.indexOf(n,e);case"object":if(null===n)return t.indexOf(n,e)}for(;e<t.length;){if(Me(t[e],n))return e;e+=1}return-1}(n,t,0)>=0}var Be=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!Le(t,!0,this)},t.prototype.has=function(t){return Le(t,!1,this)},t}();function Le(t,n,e){var r,i=typeof t;switch(i){case"string":case"number":return 0===t&&1/t==-1/0?!!e._items["-0"]||(n&&(e._items["-0"]=!0),!1):null!==e._nativeSet?n?(r=e._nativeSet.size,e._nativeSet.add(t),e._nativeSet.size===r):e._nativeSet.has(t):i in e._items?t in e._items[i]||(n&&(e._items[i][t]=!0),!1):(n&&(e._items[i]={},e._items[i][t]=!0),!1);case"boolean":if(i in e._items){var s=t?1:0;return!!e._items[i][s]||(n&&(e._items[i][s]=!0),!1)}return n&&(e._items[i]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==e._nativeSet?n?(r=e._nativeSet.size,e._nativeSet.add(t),e._nativeSet.size===r):e._nativeSet.has(t):i in e._items?!!Ve(t,e._items[i])||(n&&e._items[i].push(t),!1):(n&&(e._items[i]=[t]),!1);case"undefined":return!!e._items[i]||(n&&(e._items[i]=!0),!1);case"object":if(null===t)return!!e._items.null||(n&&(e._items.null=!0),!1);default:return(i=Object.prototype.toString.call(t))in e._items?!!Ve(t,e._items[i])||(n&&e._items[i].push(t),!1):(n&&(e._items[i]=[t]),!1)}}var Ue=ne((function(t,n){for(var e=[],r=0,i=t.length,s=n.length,o=new Be,u=0;u<s;u+=1)o.add(n[u]);for(;r<i;)o.add(t[r])&&(e[e.length]=t[r]),r+=1;return e})),We=te((function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():se(t)?[]:oe(t)?"":function(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)?{}:ye(t)?function(){return arguments}():void 0})),Fe=ne(Ce),Je=te((function(t){return null!=t&&Me(t,We(t))})),Ke=ie((function(t,n,e){return Me(n,e[t])}));const Xe="visualViewport"in window;function Ge(){return Xe}const Qe=t=>{var n="_one_time_initial_";return function(e){e!==n&&(n=e,t(e))}};const Ye=/iPhone/.test(navigator.userAgent),Ze=()=>screen.orientation.type.startsWith("portrait")?"portrait":"landscape",$e=Ee(ze(Ft,Pn((t,n)=>t?st():at(n)))),tr=()=>document.activeElement&&document.activeElement!==document.body;function nr(){return!Ye||Ge()}function er(t){if(Ye)return function(t){if(!Ge())return console.warn("On-Screen-Keyboard detection not supported on this version of iOS"),()=>void 0;const n=Qe(t),e=t=>{n(t.target.height===window.innerHeight?"hidden":"visible")};return visualViewport.addEventListener("resize",e),function(){visualViewport.removeEventListener("resize",e)}}(t);const n=Math.max(700,700)-500+200,[e,r]=Gn(),i=H(),s=window.innerHeight,o=screen.availHeight-window.innerHeight,u=Cn(Wn(document.documentElement),Fn(document.documentElement)),c=Te(Un("visibilitychange",document))(He(Rn(()=>document.visibilityState),zn(document.visibilityState))),h=Te(u)(He(Rn(t=>"focusin"===t.type?at(!1):ct(700,!0)),sn,zn(!tr()),fn,Sn)),f=Te(Jn(screen.orientation))(He(Pn(t=>t||window.innerHeight===s,h),Ln(700),Rn(t=>({screenOrientation:Ze(),height:t?window.innerHeight:screen.availHeight-o})))),a=Te(h)(He(Dn(Fe(!0)),Rn(()=>({screenOrientation:Ze(),height:window.innerHeight})))),p=Te(Kt([a,f]))(He(Bn(1e3),$e(Rn(Me("hidden"),c)),qn((t,{screenOrientation:n,height:e})=>Ae(n,e,t),{[Ze()]:window.innerHeight}),Mn(ze(Je,Ue(["portrait","landscape"]),_e)))),l=Te(Kn(window))(He(Ln(500),Rn(t=>({width:t.target.innerWidth,height:t.target.innerHeight})),qn((t,n)=>({...n,isJustHeightResize:t.width===n.width,dH:n.height-t.height}),{width:window.innerWidth,height:window.innerHeight,isJustHeightResize:!1,dH:0}),Dn(Ke("isJustHeightResize",!0)))),d=Te(l)(He(Bn(n),Pn((t,{height:n,dH:e})=>{const r=t[Ze()];return r?n<.9*r&&e<0?at("visible"):n===r&&e>0?at("hidden"):st():e>.1*screen.availHeight?at("hidden"):e<-.1*screen.availHeight?at("visible"):st()},p),Ft,Cn(Te(h)(He(Dn(Fe(!0)),Rn(Oe("hidden"))))),Vn(r),fn));return Hn(Nn(t,d),i),e}export{nr as isSupported,er as subscribe};
